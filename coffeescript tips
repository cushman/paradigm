When you require a module, make sure to assign it explicitly:
module = require 'module'

When calling calling a function without arguments, make sure to put empty parens:
main()
NOT: main

'in' means an element of an array. To iterate through an object, use 'of':
i for i of {a: 1, b:2, c:3} => [a,b,c]
i for i in [a,b,c] => [a,b,c]
(Don't forget that arrays are objects too!)